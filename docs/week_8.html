<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Learning Diary - CASA0023 - 8&nbsp; Week 8 - Classification II</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./week_9.html" rel="next">
<link href="./week_7.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./week_8.html"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Week 8 - Classification II</span></a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Learning Diary - CASA0023</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">About</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Week 1 - An Introduction to Remotely Sensing</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week_2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">week_2</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week_3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Week 3 - Remotely Sensed Data Corrections and Data joining and Enhancement</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week_4.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Week 4 - The Policy of ‘Arable Land Minimum’ in Shanghai</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week_5.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Week 5</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week_6.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Week 6 - Intro to GEE</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week_7.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Week 7 - Classification I</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week_8.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Week 8 - Classification II</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week_9.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Week 9 - Synthetic Aperture Radar (SAR)</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#summary" id="toc-summary" class="nav-link active" data-scroll-target="#summary"><span class="header-section-number">8.1</span> 8.1 Summary</a>
  <ul class="collapse">
  <li><a href="#land-cover-classification-continued" id="toc-land-cover-classification-continued" class="nav-link" data-scroll-target="#land-cover-classification-continued"><span class="header-section-number">8.1.1</span> <strong>8.1.1 Land Cover Classification (Continued)</strong></a></li>
  <li><a href="#accuracy-accessment" id="toc-accuracy-accessment" class="nav-link" data-scroll-target="#accuracy-accessment"><span class="header-section-number">8.1.2</span> 8.1.2 Accuracy Accessment</a></li>
  <li><a href="#practical" id="toc-practical" class="nav-link" data-scroll-target="#practical"><span class="header-section-number">8.1.3</span> 8.1.3 Practical</a></li>
  </ul></li>
  <li><a href="#application" id="toc-application" class="nav-link" data-scroll-target="#application"><span class="header-section-number">8.2</span> 8.2 Application</a></li>
  <li><a href="#reflection" id="toc-reflection" class="nav-link" data-scroll-target="#reflection"><span class="header-section-number">8.3</span> 8.3 Reflection</a></li>
  <li><a href="#reference-list" id="toc-reference-list" class="nav-link" data-scroll-target="#reference-list"><span class="header-section-number">8.4</span> 8.4 Reference list</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Week 8 - Classification II</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="summary" class="level2" data-number="8.1">
<h2 data-number="8.1" class="anchored" data-anchor-id="summary"><span class="header-section-number">8.1</span> 8.1 Summary</h2>
<p>I have taken what I have learnt this week and reviewed the course material and organised it into the following mind map for convenience of review and understanding:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="wk8/week8_summary.png" class="img-fluid figure-img"></p>
</figure>
</div>
<p>Mind map of week 8 summary</p>
<p>The following 8.1.1 and 8.1.2 summarise the content of all the sub-elements listed in the mind map:</p>
<section id="land-cover-classification-continued" class="level3" data-number="8.1.1">
<h3 data-number="8.1.1" class="anchored" data-anchor-id="land-cover-classification-continued"><span class="header-section-number">8.1.1</span> <strong>8.1.1 Land Cover Classification (Continued)</strong></h3>
<p><strong>The need for landcover data (current or historical):</strong></p>
<ul>
<li>Historical and current land cover data are crucial for understanding changes on the Earth’s surface, urban expansion, and managing natural resources effectively.</li>
</ul>
<p><strong>The use of pre-classified data:</strong></p>
<ul>
<li>Utilization of pre-classified data sources such as GlobeLand30, the European Space Agency’s Climate Change Initiative (CCI) annual global land cover data, and Dynamic World’s near real-time 10m resolution data is highlighted.</li>
</ul>
<p><strong>The Dynamic World project:</strong></p>
<ul>
<li><p>It shows the application of AI methods for processing Sentinel-2 satellite images to estimate tree cover, urban density, or snow coverage for each pixel, encompassing data handling, preprocessing, normalization, and the classification process with Fully Convolutional Neural Networks (FCNN) and Convolutional Neural Networks (CNN).</p></li>
<li><p><strong>Accuracy Assessment:</strong></p>
<ul>
<li><p>Confusion matrices are used to assess classification accuracy, though their applicability may be limited for real-time updates or different product comparisons.</p></li>
<li><p>Dynamic World data could be compared by other LULC datasets globally and regionally, like ESA CCI, CGLS ProbaV, ESA Sentinel-2 GLC, MapBiomas, and USGS NLCD, to validate accuracy at specific locations in Brazil, Norway, and the United States, involving resolution and land cover class distribution comparisons.</p></li>
</ul></li>
</ul>
<p><strong>Object-Based Image Analysis and Sub-Pixel Analysis:</strong></p>
<ul>
<li><p>Object-Based Image Analysis (OBIA) uses the SLIC algorithm to cluster pixels into superpixels based on homogeneity or heterogeneity.</p></li>
<li><p>Sub-pixel analysis techniques, including sub-pixel classification, Spectral Mixture Analysis (SMA), and linear spectral unmixing, aim to quantify the proportions of different land cover types within a single pixel.</p></li>
</ul>
</section>
<section id="accuracy-accessment" class="level3" data-number="8.1.2">
<h3 data-number="8.1.2" class="anchored" data-anchor-id="accuracy-accessment"><span class="header-section-number">8.1.2</span> 8.1.2 Accuracy Accessment</h3>
<p><strong>Accuracy Assessment in Remote Sensing and Machine Learning</strong></p>
<ul>
<li><p>Producer’s accuracy, user’s accuracy, and overall accuracy serve as primary metrics for classification model performance evaluation.</p></li>
<li><p>The Kappa coefficient is employed to measure image classification accuracy, despite its controversies.</p></li>
<li><p>ROC curves and AUC values are further utilized to evaluate binary classifier performance.</p></li>
<li><p><strong>F1 Score</strong>: The F1 score, a harmonic mean of precision and recall, is crucial, especially in the context of imbalanced datasets. It provides a balance between the precision (user’s accuracy) and recall (producer’s accuracy), serving as a singular metric to assess binary classification systems where false positives and false negatives might have different implications.</p></li>
</ul>
<p><strong>Challenges in Accuracy Assessment</strong></p>
<ul>
<li><p>The procurement of suitable test data for accuracy evaluation involves strategies like using new datasets, implementing train/test splits, and applying cross-validation techniques.</p></li>
<li><p>Spatial cross-validation methods for spatial autocorrelation issues between training and testing data sets is used to mitigate the impact of geographical proximity on model evaluation, ensuring that the training and testing data are sufficiently separate to provide an accurate assessment of model performance.</p></li>
</ul>
</section>
<section id="practical" class="level3" data-number="8.1.3">
<h3 data-number="8.1.3" class="anchored" data-anchor-id="practical"><span class="header-section-number">8.1.3</span> 8.1.3 Practical</h3>
<p><strong>Summary of this week’s practical:</strong></p>
<ul>
<li><p><strong>Vector Data Processing</strong>:</p>
<ul>
<li>Loaded Level 2 Global Administrative Unit Layers (GAUL) and styled them on the map. By setting the color, width, and fill color (including transparency), the practice demonstrated how to visually enhance vector data representation. Additionally, learned how to filter the dataset based on specific conditions (e.g., administrative unit names) to focus on a particular study area (e.g., Dar es Salaam).</li>
</ul></li>
<li><p><strong>Earth Observation (EO) Data Processing</strong>:</p>
<ul>
<li>Switched to using Landsat data, mastering skills in setting scale functions, loading imagery, filtering based on dates and study areas, cloud coverage filtering, applying scale functions, extracting medians, and mapping the output. Furthermore, through creating and utilizing functions, learned how to identify and mask clouds or cloud shadows using Quality Assessment (QA) bands, though it was noted that some masked areas were actually sand or suspended matter, not clouds.</li>
</ul></li>
<li><p><strong>Image Classification</strong>:</p>
<ul>
<li>Two main methods of image classification - sub pixel analysis and object based image analysis (OBIA). Sub pixel analysis involved defining land cover endmembers (e.g., urban, vegetation, and water) and calculating the fraction of each pixel’s endmembers. OBIA involved clustering similar pixels into objects using techniques like K-means and SNIC, followed by analyzing and classifying these objects.</li>
</ul></li>
<li><p><strong>Accuracy Assessment</strong>:</p>
<ul>
<li>Explored methods for assessing the accuracy of sub pixel analysis, including hardening the sub pixel image or comparing it with high resolution imagery to evaluate the precision of the classifications.</li>
</ul></li>
</ul>
<p><strong>These images below show the study area and the final results of the sub pixel analysis and object based</strong> <strong>image analysis (OBIA) of the remotely sensed data of the area:</strong></p>
<p>The study area is <strong>Dar es Salaam</strong>, and below is a clipped Landsat image of this area (to make it easier to compare the effects of the classification results later on):</p>
<ul>
<li><strong>Study area:</strong></li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="wk8/Daressalaam.jpg" class="img-fluid figure-img"></p>
</figure>
</div>
<p>Clipped Landsat image of Dar es Salaam</p>
<p><strong>Sub pixel analysis:</strong></p>
<p>Before I started this classification I checked the resolution of the images and found that the resolution was not very high, so some features were not easily distinguishable (I also sampled some of the polygon samples using the satellite base map from Google Maps as reference). I thought the result of the classification would be poor, but I didn’t realise that the actual result would look OK to the naked eye compared to the satellite data:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="wk8/Daressalaam_Sub_pixel_Analysis.jpg" class="img-fluid figure-img"></p>
</figure>
</div>
<p>The result of Sub pixel analysis</p>
<p><strong>Object based image analysis:</strong></p>
<p>The effects of the result from this analysis are significantly worse compared to the previous method:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="wk8/Daressalaam_Object_based_Image_Analysis.jpg" class="img-fluid figure-img"></p>
</figure>
</div>
<p>The result of Object based image analysis</p>
<p><strong>Explanation for the final results:</strong></p>
<ul>
<li><p>From my observation of Landsat satellite imagery and Google Maps satellite image base map of the study area, I found that the land cover of the area is complex. The mixing of urban and forested or bare or grassy land on the surface of the area is very common. And there is a clear difference between the principle of Object-based classification method and Sub pixel analysis method:</p>
<ul>
<li><p>Object based image analysis often performs poorly in areas with high spatial heterogeneity or complex land cover because it relies on spatial proximity and similarity of pixels for classification, potentially missing finer surface variations.</p></li>
<li><p>Sub pixel analysis examining the composition within each pixel could more intricately represent mixed land cover situations, making it more effective for capturing small-scale and complex features.</p></li>
</ul></li>
<li><p>Therefore, the result of Sub pixel analysis is significantly better than the result of Object based image analysis as observed by the naked eyes comparison.</p></li>
</ul>
</section>
</section>
<section id="application" class="level2" data-number="8.2">
<h2 data-number="8.2" class="anchored" data-anchor-id="application"><span class="header-section-number">8.2</span> 8.2 Application</h2>
<p><strong>Sub pixel analysis:</strong></p>
<p>Vos <em>et al.</em> (2019) use an open-source software toolkit named CoastSat, combined with Google Earth Engine (GEE) and Sub-pixel analysis techniques, to extract time series of sandy shoreline positions from publicly available satellite images. It achieves an accuracy of approximately 10 meters (Vos <em>et al.</em>, 2019). Sub pixel analysis, applying a robust Sub-pixel resolution shoreline detection algorithm to pre-processed satellite images, which includes supervised image classification and Sub pixel border segmentation, enhances the accuracy and detail recognition capability of shoreline mapping (Vos <em>et al.</em>, 2019). <strong>However</strong>, this method relies on advanced image processing technologies and complex computations, requiring substantial computing resources and algorithm optimization, and may take a longer time when dealing with large-scale data. In addition, despite GEE’s powerful data processing capabilities, users need to have a certain level of familiarity and understanding of the GEE platform and related APIs. When processing extremely large datasets, performance bottlenecks or service limitations might be encountered.</p>
<p><strong>Object based image analysis:</strong></p>
<p>Ali <em>et al.</em> (2023) using object-based image analysis on the Google Earth Engine platform map the area changes of 480 glaciers on Novaya Zemlya from 1986-1989 to 2019-2021, which reveals a total glacier area reduction of 5.8%. This method has streamlined the process of generating accurate glacier outlines, enhancing efficiency (Ali <em>et al.</em>, 2023). The object based image analysis method integrating multispectral Landsat imagery and the computational resources of Google Earth Engine automates the mapping of glacier changes and generates highly accurate glacier outlines with an overall accuracy rate of 96-97% (Ali <em>et al.</em>, 2023). <strong>While</strong> this method effectively reduces the need for manual corrections, it may not perform well in mapping debris-covered glaciers or areas covered with fresh snow and thin cloud layers (Ali <em>et al.</em>, 2023). Additionally, reliance on Google Earth Engine might limit access to specific datasets and advanced analysis tools.</p>
</section>
<section id="reflection" class="level2" data-number="8.3">
<h2 data-number="8.3" class="anchored" data-anchor-id="reflection"><span class="header-section-number">8.3</span> 8.3 Reflection</h2>
<p>During this week I have gained knowledge of unfamiliar or new skills such as Dynamic World Project, Sub pixel analysis, Object based image analysis, all of which are cool and greatly enriched my knowledge of remotely sensed classification methods and accuracy assessment.</p>
<p>As it may be largely unfamiliar content, I was not very clear about the structure of the course content, so after reviewing the study material I put together a mind map to make it easier to quickly clarify the structure of content in future reviews. I had never come across the two classification methods sub pixel analysis and Object based image analysis before, but I was impressed with sub pixel analysis during this week’s study. I didn’t realise that sub pixel analysis could classify remote sensing images with low resolution with good results. In the future, this method could be considered for analysing the land cover of images with low resolution and complex land cover.</p>
</section>
<section id="reference-list" class="level2" data-number="8.4">
<h2 data-number="8.4" class="anchored" data-anchor-id="reference-list"><span class="header-section-number">8.4</span> 8.4 Reference list</h2>
<p>Ali, A., Dunlop, P., Coleman, S., Kerr, D., McNabb, R. W., and Noormets, R. (2023) Glacier area changes in Novaya Zemlya from 1986–89 to 2019–21 using object-based image analysis in Google Earth Engine. <em>Journal of glaciology</em>. [Online] 69 (277), 1305–1316. DOI: 10.1017/jog.2023.18.</p>
<p>Vos, K., Splinter, K. D., Harley, M. D., Simmons, J. A., and Turner, I. L. (2019) CoastSat: A Google Earth Engine-enabled Python toolkit to extract shorelines from publicly available satellite imagery. <em>Environmental modelling &amp; software : with environment data news</em>. [Online] 122104528-. DOI: 10.1016/j.envsoft.2019.104528.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./week_7.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Week 7 - Classification I</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./week_9.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Week 9 - Synthetic Aperture Radar (SAR)</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>